<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ders Takip</title>
    <style>
        /* ... Mevcut genel stiller korunmuştur ... */
        :root {
            --primary: #F97316;
            --bg: #0b1220;
            --text-main: #e5e7eb;
            --text-sub: #9ca3af;
            --card: #111827;
            --border: #1f2937;
        }

        /* NOKTA GÖSTERGESİ İÇİN KRİTİK CSS DÜZELTMELERİ */
        .lesson-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            position: relative;
        }

        /* Noktaların olduğu konteyner: Satır numarasının hemen soluna sabitlendi */
        .mini-indicator {
            display: flex;
            flex-direction: column; /* Noktaları alt alta veya yan yana dizebilirsiniz */
            gap: 3px;
            min-width: 8px;
            align-items: center;
            justify-content: center;
        }

        .dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: var(--primary);
            display: none; /* Varsayılan gizli */
        }

        .dot.on {
            display: block; /* Sadece veri varsa göster */
            box-shadow: 0 0 5px var(--primary);
        }

        .item-idx {
            color: var(--primary);
            font-weight: 900;
            font-size: 16px;
            min-width: 20px;
            text-align: center;
        }

        /* Diğer stil tanımlamaları aynı kalabilir... */
    </style>
</head>
<body data-theme="dark">
    <script>
        // RenderHome fonksiyonunda nokta basan kısım şu şekilde güncellendi:
        function renderHome() {
            const list = document.getElementById('scheduleList');
            const dayData = db.schedule.filter(s => s.day === currentActiveDay).sort((a,b) => a.idx - b.idx);
            
            // ... zaman hesaplama kısımları ...

            let html = "";
            dayData.forEach(s => {
                const key = `${s.day}-${s.idx}`;
                const ann = db.annotations[key] || {};
                
                // Veri kontrolü (Ödev, Not veya Sınav var mı?)
                const hasData = (ann.homework && ann.homework.trim()) || 
                                (ann.note && ann.note.trim()) || 
                                (ann.examDate && ann.examDate.trim());

                html += `
                <div class="card lesson-card" onclick="openNoteModal('${s.day}', ${s.idx})">
                    <div class="lesson-row">
                        <div class="mini-indicator">
                            <div class="dot ${hasData ? 'on' : ''}"></div>
                        </div>
                        <div class="item-idx">${s.idx}</div>
                        <div class="item-time">${/* zaman buraya */}</div>
                        <div class="item-class">${s.class}</div>
                        <div class="item-title">${s.lesson}</div>
                    </div>
                </div>`;
            });
            list.innerHTML = html;
        }
    </script>
</body>
</html>
